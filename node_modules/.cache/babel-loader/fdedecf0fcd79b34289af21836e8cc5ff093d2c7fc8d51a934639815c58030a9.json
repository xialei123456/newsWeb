{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, watch, onMounted, computed } from 'vue';\n//import { storeToRefs } from 'pinia';\n//import { useUserStore } from '@/stores/user'; // 引入用户 store\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\n// 创建搜索关键字的响应式变量\n\nconst __default__ = {\n  name: 'HeaderItem'\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const search = ref('');\n\n    // 监听 search 的变化并执行搜索操作\n    watch(search, newValue => {\n      //console.log('Searching for:', newValue)\n      // 执行搜索时的逻辑代码, 比如调用搜索接口\n    });\n\n    // 触发搜索功能后，跳转搜索页面\n    const router = useRouter(); // 获取路由实例\n    const clickSearch = keywords => {\n      router.push({\n        name: 'SearchPage',\n        query: {\n          keyword: keywords\n        }\n      }); // 跳转, 携带 query 参数\n    };\n\n    // 使用 Pinia 状态系统引入\n    //const userStore = useUserStore();\n    //const { isLoggedIn, username } = storeToRefs(userStore); // 从状态管理中提取 ref\n\n    // 跳转至收藏页面的函数\n    const goStarPage = () => {\n      router.push({\n        name: 'StarPage'\n      }); // 跳转到收藏页面 NewsPage 相似\n    };\n\n    //登录态获取\n    const store = useStore(); //使用Vuex实例\n    let isLoggedIn = computed(() => !!store.getters.token); // 计算属性，在sidebar登录态变化时也能改变\n    let loggedName = computed(() => !!store.getters.name);\n    const handleLogout = () => {\n      store.dispatch('LogOut').then(() => {\n        console.log(\"登出成功\");\n      }).catch(error => {\n        console.error(\"登出失败\", error);\n      });\n    };\n    onMounted(() => {\n      loggedName.value = store.getters.name;\n    });\n    const __returned__ = {\n      search,\n      router,\n      clickSearch,\n      goStarPage,\n      store,\n      get isLoggedIn() {\n        return isLoggedIn;\n      },\n      set isLoggedIn(v) {\n        isLoggedIn = v;\n      },\n      get loggedName() {\n        return loggedName;\n      },\n      set loggedName(v) {\n        loggedName = v;\n      },\n      handleLogout,\n      ref,\n      watch,\n      onMounted,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"names":["ref","watch","onMounted","computed","useRouter","useStore","__default__","name","search","newValue","router","clickSearch","keywords","push","query","keyword","goStarPage","store","isLoggedIn","getters","token","loggedName","handleLogout","dispatch","then","console","log","catch","error","value"],"sources":["D:/ForWork/找实习/中信证券code比赛/复赛/front/news-front/src/components/HeaderItem.vue"],"sourcesContent":["<template>\r\n  <header class=\"header\">\r\n    <div class=\"logo\">金融资讯聚合</div>\r\n\r\n    <!-- 搜索栏 -->\r\n    <!-- 使用 Vuetify 提供的文本输入组件, v-model 双向绑定 search 变量, append-icon 添加放大镜图标 -->\r\n    <v-text-field clearable\r\n      v-model=\"search\"\r\n      append-icon=\"mdi-magnify\"\r\n      @click:append=\"clickSearch(search)\"\r\n      label=\"Type the keyword of your interests\"\r\n      hide-details\r\n      class=\"search-bar\"\r\n      variant=\"solo\"\r\n\r\n      density=\"compact\"\r\n      single-line\r\n    ></v-text-field>\r\n\r\n    <!-- 用户信息及功能菜单 -->\r\n    <v-menu v-if=\"isLoggedIn\" open-on-click offset-y>\r\n      <template v-slot:activator=\"{ props }\">  <!--新版使用props-->\r\n        <v-btn icon v-bind=\"props\">\r\n          <v-icon>mdi-account-circle</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-list>\r\n        <v-list-item>\r\n          <v-list-item-title>{{loggedName}}</v-list-item-title>\r\n        </v-list-item>\r\n        <v-list-item @click=\"goStarPage()\">\r\n          <v-list-item-title>我的收藏</v-list-item-title>\r\n        </v-list-item>\r\n        <v-list-item @click=\"handleLogout()\">\r\n          <v-list-item-title>退出登录</v-list-item-title>\r\n        </v-list-item>\r\n      </v-list>\r\n    </v-menu>\r\n    <span v-else>未登录</span>\r\n  </header>\r\n\r\n  <!-- 标签导航 -->\r\n  <div style=\"padding:5px;margin-top:5px\">\r\n    <nav>\r\n      <ul>\r\n        <!-- 使用 router-link 进行导航和路由 -->\r\n        <li><router-link to=\"/\">首页</router-link></li>\r\n        <li><router-link :to=\"{ name: 'LabelNews', params: { label: '新闻' } }\">新闻</router-link></li>\r\n        <li><router-link :to=\"{ name: 'LabelNews', params: { label: '证券' } }\">证券</router-link></li>\r\n        <li><router-link :to=\"{ name: 'LabelNews', params: { label: '理财' } }\">理财</router-link></li>\r\n        <li><router-link :to=\"{ name: 'LabelNews', params: { label: '其他' } }\">其他</router-link></li>\r\n      </ul>\r\n    </nav>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'HeaderItem'\r\n}\r\n</script>\r\n\r\n<script setup>\r\nimport { ref, watch,onMounted,computed } from 'vue'\r\n//import { storeToRefs } from 'pinia';\r\n//import { useUserStore } from '@/stores/user'; // 引入用户 store\r\nimport { useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex';\r\n// 创建搜索关键字的响应式变量\r\nconst search = ref('')\r\n\r\n// 监听 search 的变化并执行搜索操作\r\nwatch(search, (newValue) => {\r\n  //console.log('Searching for:', newValue)\r\n  // 执行搜索时的逻辑代码, 比如调用搜索接口\r\n})\r\n\r\n// 触发搜索功能后，跳转搜索页面\r\nconst router = useRouter() // 获取路由实例\r\nconst clickSearch = (keywords) => {\r\n  router.push({ name: 'SearchPage', query: { keyword: keywords } }) // 跳转, 携带 query 参数\r\n}\r\n\r\n// 使用 Pinia 状态系统引入\r\n//const userStore = useUserStore();\r\n//const { isLoggedIn, username } = storeToRefs(userStore); // 从状态管理中提取 ref\r\n\r\n// 跳转至收藏页面的函数\r\nconst goStarPage = () => {\r\n  router.push({ name: 'StarPage' }) // 跳转到收藏页面 NewsPage 相似\r\n}\r\n\r\n//登录态获取\r\nconst store = useStore();  //使用Vuex实例\r\nlet isLoggedIn = computed(() => !!store.getters.token); // 计算属性，在sidebar登录态变化时也能改变\r\nlet loggedName = computed(() => !!store.getters.name); \r\n\r\nconst handleLogout = ()=>{\r\n  store.dispatch('LogOut').then(()=>{\r\n    console.log(\"登出成功\");\r\n  }).catch((error) => {\r\n    console.error(\"登出失败\",error);\r\n  }\r\n    )\r\n  }\r\n\r\nonMounted(()=>{\r\n  loggedName.value = store.getters.name\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 10px 20px;\r\n  background-color: #e5e5e5;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.logo {\r\n  font-size: 17px;\r\n\r\n}\r\n\r\n.search-bar {\r\n  width: 28%;\r\n  flex-grow: 1; /* 搜索栏占据剩余的中间空间 */\r\n  margin: 0 auto; /* 搜索栏在页面中居中 */\r\n  max-width: 540px;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-35%);\r\n}\r\n\r\nnav ul {\r\n  display: flex;\r\n  justify-content: center;\r\n  list-style: none;\r\n}\r\n\r\nnav ul li {\r\n  margin-left: 20px;\r\n}\r\n\r\nnav ul li a {\r\n  text-decoration: none;\r\n  color: #333;\r\n}\r\n</style>\r\n"],"mappings":";AA+DA,SAASA,GAAG,EAAEC,KAAK,EAACC,SAAS,EAACC,QAAQ,QAAQ,KAAK;AACnD;AACA;AACA,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,QAAQ,QAAQ,MAAM;AAC/B;;AAXA,MAAAC,WAAA,GAAe;EACbC,IAAI,EAAE;AACR,CAAC;;;;;;IAUD,MAAMC,MAAM,GAAGR,GAAG,CAAC,EAAE,CAAC;;IAEtB;IACAC,KAAK,CAACO,MAAM,EAAGC,QAAQ,IAAK;MAC1B;MACA;IAAA,CACD,CAAC;;IAEF;IACA,MAAMC,MAAM,GAAGN,SAAS,CAAC,CAAC,EAAC;IAC3B,MAAMO,WAAW,GAAIC,QAAQ,IAAK;MAChCF,MAAM,CAACG,IAAI,CAAC;QAAEN,IAAI,EAAE,YAAY;QAAEO,KAAK,EAAE;UAAEC,OAAO,EAAEH;QAAS;MAAE,CAAC,CAAC,EAAC;IACpE,CAAC;;IAED;IACA;IACA;;IAEA;IACA,MAAMI,UAAU,GAAGA,CAAA,KAAM;MACvBN,MAAM,CAACG,IAAI,CAAC;QAAEN,IAAI,EAAE;MAAW,CAAC,CAAC,EAAC;IACpC,CAAC;;IAED;IACA,MAAMU,KAAK,GAAGZ,QAAQ,CAAC,CAAC,CAAC,CAAE;IAC3B,IAAIa,UAAU,GAAGf,QAAQ,CAAC,MAAM,CAAC,CAACc,KAAK,CAACE,OAAO,CAACC,KAAK,CAAC,CAAC,CAAC;IACxD,IAAIC,UAAU,GAAGlB,QAAQ,CAAC,MAAM,CAAC,CAACc,KAAK,CAACE,OAAO,CAACZ,IAAI,CAAC;IAErD,MAAMe,YAAY,GAAGA,CAAA,KAAI;MACvBL,KAAK,CAACM,QAAQ,CAAC,QAAQ,CAAC,CAACC,IAAI,CAAC,MAAI;QAChCC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACrB,CAAC,CAAC,CAACC,KAAK,CAAEC,KAAK,IAAK;QAClBH,OAAO,CAACG,KAAK,CAAC,MAAM,EAACA,KAAK,CAAC;MAC7B,CACE,CAAC;IACH,CAAC;IAEH1B,SAAS,CAAC,MAAI;MACZmB,UAAU,CAACQ,KAAK,GAAGZ,KAAK,CAACE,OAAO,CAACZ,IAAI;IACvC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}