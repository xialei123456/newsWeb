{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-3eca7188\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"sidebar\"\n};\nconst _hoisted_2 = {\n  class: \"picks\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"margin-left\": \"2px\"\n  }\n}, \"猜你喜欢\", -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-h5\"\n}, \"登录\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_card_title = _resolveComponent(\"v-card-title\");\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_v_form = _resolveComponent(\"v-form\");\n  const _component_v_card_text = _resolveComponent(\"v-card-text\");\n  const _component_v_spacer = _resolveComponent(\"v-spacer\");\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_dialog = _resolveComponent(\"v-dialog\");\n  return _openBlock(), _createElementBlock(\"aside\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, !$setup.isLoggedIn ? (_openBlock(), _createBlock(_component_v_btn, {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = $event => $setup.showDialog = true),\n    rounded: \"lg\",\n    size: \"small\",\n    block: \"\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"登录\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 登录弹出框，使用v-dialog组件实现 \"), _createVNode(_component_v_dialog, {\n    modelValue: $setup.showDialog,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.showDialog = $event),\n    persistent: \"\",\n    \"max-width\": \"400\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_card, null, {\n      default: _withCtx(() => [_createCommentVNode(\" 标题部分 \"), _createVNode(_component_v_card_title, null, {\n        default: _withCtx(() => [_hoisted_4]),\n        _: 1 /* STABLE */\n      }), _createCommentVNode(\" 输入字段 \"), _createVNode(_component_v_card_text, null, {\n        default: _withCtx(() => [_createCommentVNode(\" 这里绑定 loginFormRef \"), _createVNode(_component_v_form, {\n          ref: \"loginFormRef\",\n          modelValue: $setup.valid,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.valid = $event),\n          rules: $setup.loginRules,\n          \"lazy-validation\": true\n        }, {\n          default: _withCtx(() => [_createVNode(_component_v_text_field, {\n            modelValue: $setup.loginForm.username,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.loginForm.username = $event),\n            label: \"用户名\",\n            required: \"\"\n          }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_v_text_field, {\n            modelValue: $setup.loginForm.password,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.loginForm.password = $event),\n            label: \"密码\",\n            type: \"password\",\n            required: \"\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\", \"rules\"])]),\n        _: 1 /* STABLE */\n      }), _createCommentVNode(\" 按钮区域 \"), _createVNode(_component_v_card_actions, null, {\n        default: _withCtx(() => [_createVNode(_component_v_spacer), _createCommentVNode(\" 登录按钮 \"), _createVNode(_component_v_btn, {\n          color: \"blue darken-1\",\n          text: \"\",\n          onClick: $setup.handleLogin\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"登录\")]),\n          _: 1 /* STABLE */\n        }), _createCommentVNode(\" 取消按钮 \"), _createVNode(_component_v_btn, {\n          color: \"grey darken-1\",\n          text: \"\",\n          onClick: _cache[4] || (_cache[4] = $event => $setup.showDialog = false)\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"取消\")]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","$setup","isLoggedIn","_createBlock","_component_v_btn","key","onClick","_cache","$event","showDialog","rounded","size","block","default","_withCtx","_createTextVNode","_","_createCommentVNode","_createVNode","_component_v_dialog","modelValue","persistent","_component_v_card","_component_v_card_title","_hoisted_4","_component_v_card_text","_component_v_form","ref","valid","rules","loginRules","_component_v_text_field","loginForm","username","label","required","password","type","_component_v_card_actions","_component_v_spacer","color","text","handleLogin"],"sources":["D:\\ForWork\\找实习\\中信证券code比赛\\复赛\\front\\news-front\\src\\components\\SideBar.vue"],"sourcesContent":["<template>\r\n  <aside class=\"sidebar\">\r\n    <div class=\"picks\">\r\n      <p style=\"margin-left:2px\">猜你喜欢</p>\r\n      <v-btn v-if=\"!isLoggedIn\" @click=\"showDialog = true\" rounded=\"lg\" size=\"small\" block>登录</v-btn>\r\n    </div>\r\n    <!-- 登录弹出框，使用v-dialog组件实现 -->\r\n    <v-dialog v-model=\"showDialog\" persistent max-width=\"400\">\r\n      <v-card>\r\n        <!-- 标题部分 -->\r\n        <v-card-title>\r\n          <span class=\"text-h5\">登录</span>\r\n        </v-card-title>\r\n        <!-- 输入字段 -->\r\n        <v-card-text>\r\n          <!-- 这里绑定 loginFormRef -->\r\n          <v-form ref=\"loginFormRef\" v-model=\"valid\" :rules=\"loginRules\" :lazy-validation=\"true\">\r\n            <v-text-field v-model=\"loginForm.username\" label=\"用户名\" required></v-text-field>\r\n            <v-text-field v-model=\"loginForm.password\" label=\"密码\" type=\"password\" required></v-text-field>\r\n          </v-form>\r\n        </v-card-text>\r\n        <!-- 按钮区域 -->\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <!-- 登录按钮 -->\r\n          <v-btn color=\"blue darken-1\" text @click=\"handleLogin\">登录</v-btn>\r\n          <!-- 取消按钮 -->\r\n          <v-btn color=\"grey darken-1\" text @click=\"showDialog = false\">取消</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </aside>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, computed } from 'vue';\r\nimport { useStore } from 'vuex';\r\n//import { useRouter } from 'vue-router';\r\nimport { setCookie, getCookie } from '@/utils/support';\r\n\r\nconst showDialog = ref(false);  // 控制弹出框显示/隐藏的变量\r\nconst loginFormRef = ref(null); // 绑定表单引用\r\n\r\nconst store = useStore();  //使用Vuex实例\r\n//const router = useRouter(); \r\n\r\nconst loginForm = reactive({  // 格式化登录信息\r\n  username: '',\r\n  password: '',\r\n});\r\n\r\n/*--------------------登录逻辑部分-----------------*/ \r\nconst loginRules = reactive({\r\n  username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\r\n  password: [{ required: true, message: '请输入密码', trigger: 'blur', min: 3 }],\r\n});\r\n\r\n//检查登录状态,保存到isLoggedIn里\r\n// 计算属性，基于 Vuex 的 token 状态\r\nconst isLoggedIn = computed(() => !!store.getters.token);\r\nconst valid = ref(false);\r\n//登录\r\nconst handleLogin = () => {\r\n  loginFormRef.value.validate().then(success => {\r\n    if (success) {\r\n      store.dispatch('Login', loginForm).then(() => {\r\n        setCookie('username', loginForm.username, 15);\r\n        setCookie('password', loginForm.password, 15);\r\n        isLoggedIn.value = true;\r\n        showDialog.value = false;\r\n        //router.push({ path: '/' });\r\n      }).catch(() => {\r\n        isLoggedIn.value = false;\r\n        showDialog.value = true\r\n      });\r\n    } else {\r\n      console.log('参数验证不合法！');\r\n      return false;\r\n    }\r\n  });\r\n};\r\n\r\nonMounted(() => {\r\n  loginForm.username = getCookie('username') || 'admin';\r\n  loginForm.password = getCookie('password') || '';\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.sidebar {\r\n  padding: 20px;\r\n  background-color: #ffffff;\r\n  border-left: 1px solid #ddd;\r\n  width: 20%;\r\n}\r\n\r\n.picks button {\r\n  background-color: #bfcdff;\r\n  color: #000000;\r\n  border: none;\r\n  padding: 3px 6px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  min-width: 0;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}